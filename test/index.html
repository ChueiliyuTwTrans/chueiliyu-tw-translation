<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>å´”ç«‹äºå°ç£ç¿»è­¯ç«™ | ç²‰çµ²ç¿»è­¯æ•´ç†</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta name="description" content="å´”ç«‹äº (CHUEI LI YU) å°ç£éå®˜æ–¹ç¿»è­¯ç«™ã€‚æ•´ç†ç›´æ’­ã€ç¯€ç›®ã€é›»å°ç­‰ä¸­æ–‡ç¿»è­¯å½±ç‰‡ï¼Œåƒ…ä½œå­¸ç¿’èˆ‡æ¨å»£ä½¿ç”¨ã€‚">
<meta name="keywords" content="å´”ç«‹äº, CHUEI LI YU, ç¿»è­¯, ä¸­å­—, ç›´æ’­, éŸ“æ˜Ÿ">
<meta name="author" content="è¥¿å¡">

<meta property="og:title" content="å´”ç«‹äºå°ç£ç¿»è­¯ç«™">
<meta property="og:description" content="æ•´ç†å´”ç«‹äºçš„ç›´æ’­ã€ç¯€ç›®ã€é›»å°ä¸­æ–‡ç¿»è­¯ã€‚">
<meta property="og:image" content="images/content33.webp"> 
<meta property="og:url" content="https://chueiliyutwtrans.github.io/chueiliyu-tw-translation/">
<meta property="og:type" content="website">

<style>
:root {
    --header-box-width: 320px;
}

body {
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans TC", "Microsoft JhengHei", sans-serif;
    background: #ffffff;
    color: #333;
}

/* ===== Header ===== */
header {
    position: relative;
    height: 220px;
    background-image: url("images/content33.webp");
    background-size: cover;
    background-position: 30% 35%;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    border-bottom: 5px solid #ffffff;
}

.header-text {
    position: relative;
    z-index: 1;
    padding: 14px 18px;
    background: rgba(0, 0, 0, 0.35);
    border-radius: 12px;
    backdrop-filter: blur(4px);
}

header h1 {
    margin: 0;
    font-size: 32px;
    font-weight: 500;
    letter-spacing: 2px;
    line-height: 1.3;
    color: #ffffff;
    text-shadow: 0 2px 6px rgba(0,0,0,0.4);
}

header p {
    margin-top: 10px;
    font-size: 14px;
    font-weight: 400;
    letter-spacing: 1px;
    line-height: 1.6;
    color: #eaeaea;
}

/* ===== Search ===== */
.search-box {
    position: absolute;
    top: 14px;
    left: 16px;
    z-index: 3;
}

.search-input-wrap {
    position: relative;
    width: var(--header-box-width);
    max-width: 100%;
}

.search-input-wrap input {
    width: 100%;
    padding: 6px 32px 6px 12px;
    font-size: 14px;
    border-radius: 999px;
    border: 1px solid #d1d5db;
    box-sizing: border-box;
}

.theme-fancy .search-input-wrap input {
    background: rgba(255, 255, 255, 0.55);
    backdrop-filter: blur(6px);
    border: 1px solid rgba(255,255,255,0.6);
    color: #111;
}

.theme-fancy .search-input-wrap input::placeholder {
    color: rgba(0,0,0,0.55);
}

.search-results {
    margin-top: 6px;
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.search-results button {
    font-size: 12px;
    padding: 4px 10px;
    border-radius: 999px;
    border: none;
    cursor: pointer;
    background: #e5e7eb;
}

.search-results button:hover {
    background: #d1d5db;
}

#clearSearch {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    background: transparent;
    border: none;
    font-size: 16px;
    cursor: pointer;
    line-height: 1;
    display: none;
}
#clearSearch.visible { display: block; }

#clearSearch:hover { color: #e5e7eb; }
.theme-fancy #clearSearch { color: rgba(0,0,0,0.6); }

/* ===== Header Theme Buttons ===== */
.header-theme {
    position: absolute;
    top: 14px;
    right: 16px;
    display: flex;
    gap: 6px;
    z-index: 2;
}

.header-theme button {
    font-size: 13px;
    padding: 4px 8px;
    border-radius: 14px;
    border: none;
    cursor: pointer;
    background: rgba(255,255,255,0.85);
    color: #333;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    transition: all 0.2s ease;
}

.header-theme button:hover {
    background: #ffffff;
    transform: translateY(-1px);
}

.theme-fancy .header-theme button {
    background: rgba(255, 255, 255, 0.55);
    color: #1f2937;
    border: 1px solid rgba(255, 255, 255, 0.35);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}

/* ===== Layout ===== */
.container {
    display: flex;
    min-height: calc(100vh - 16px);
}

.sidebar {
    width: 250px;
    padding: 20px;
    background-image: url("images/content5.webp");
    background-size: cover;
    background-position: center;
    border-right: 5px solid #ffffff;
    box-sizing: border-box;
    position: relative;
    z-index: 2;
}

.sidebar button {
    width: 100%;
    padding: 12px;
    margin-bottom: 10px;
    border: none;
    background: rgba(255,255,255,0.85);
    cursor: pointer;
    font-size: 15px;
    border-radius: 6px;
    transition: all 0.2s ease;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.sidebar button.active,
.sidebar button:hover {
    background: #ffffff;
    font-weight: 600;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

.content {
    flex: 1;
    padding: 24px;
    background-image: url("images/content6.webp");
    background-size: cover;
    background-position: center;
}

.section { display: none; }
.section.active { display: block; }

.card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 20px;
}

/* ===== Filter Bar ===== */
.filter-bar {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 1px dashed rgba(0,0,0,0.1);
    min-height: 38px; /* é¿å…æ²’æŒ‰éˆ•æ™‚å®Œå…¨å¡Œé™· */
}
/* å¦‚æœè©²åˆ†é¡æ²’æœ‰ä»»ä½•ç¯©é¸æŒ‰éˆ•ï¼Œéš±è—é‚£æ¢ç·šèˆ‡ç©ºé–“ */
.filter-bar:empty {
    display: none;
}

.filter-btn {
    padding: 6px 12px;
    border-radius: 20px;
    border: 1px solid transparent;
    background: rgba(255,255,255,0.7);
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s;
    color: #555;
}

.filter-btn:hover {
    background: #fff;
    transform: translateY(-1px);
}

.filter-btn.active {
    background: #60a5fa;
    color: white;
    font-weight: bold;
    box-shadow: 0 2px 5px rgba(96, 165, 250, 0.4);
}

.theme-dark .filter-btn {
    background: rgba(30,41,59,0.7);
    color: #ccc;
    border: 1px solid #334155;
}
.theme-dark .filter-btn:hover {
    background: #334155;
}
.theme-dark .filter-btn.active {
    background: #3b82f6;
    color: white;
    border-color: #3b82f6;
}

/* ===== Card ===== */
.card {
    background: #ffffff;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 6px rgba(0,0,0,0.06);
    text-decoration: none;
    color: inherit;
    transition: transform 0.2s;
    position: relative;
    display: block;
}

.card:hover { transform: translateY(-4px); }

.card img {
    width: 100%;
    height: 140px;
    object-fit: cover;
    background: #ddd;
    filter: brightness(1.03) contrast(0.98);
}

.card-body { padding: 12px; }
.card-title { font-size: 15px; font-weight: 600; }
.card-desc { font-size: 13px; color: #666; margin-top: 6px; }
.card-credit { margin-top: 10px; font-size: 12px; color: #777; line-height: 1.5; }

.search-highlight {
    outline: 3px solid #60a5fa;
    outline-offset: 4px;
}
.theme-fancy .search-highlight {
    outline: 3px solid #fde68a;
}

footer { text-align: center; font-size: 12px; color: #999; padding: 16px; }

@media (max-width: 768px) {
    header {
        display: flex;
        flex-direction: column;
        height: auto;
        padding: 10px 12px 14px;
    }
    .header-theme { order: 1; position: static; display: flex; gap: 8px; }
    .header-theme button { flex: 1; }
    .search-box { order: 2; position: static; width: 100%; display: flex; flex-direction: column; align-items: center; }
    .search-input-wrap { width: 100%; padding-right: 0; }
    .header-text { order: 3; align-self: center; width: 100%; box-sizing: border-box; }
    .container { flex-direction: column; width: 100%; }
    .sidebar { width: 100%; display: flex; padding: 12px; border-right: none; border-bottom: 2px solid #fff; gap: 8px; }
    .sidebar button { flex: 1; margin-bottom: 0; }
    .content { width: 100%; box-sizing: border-box; padding: 16px; }
    .theme-fancy { --header-box-width: 100%; }
}

body.theme-light { background: #ffffff; color: #1f2933; }
body.theme-light .card { border: 1px solid #e5e7eb; box-shadow: none; }
body.theme-light header, body.theme-light .sidebar, body.theme-light .content { background-color: #f9fafb; }

body.theme-dark { background: #0f172a; color: #e5e7eb; }
body.theme-dark .header-text { background: #020617; border: 1px solid #1f2937; }
body.theme-dark header h1 { color: #e5e7eb; }
body.theme-dark .card { background: #111827; border: 1px solid #1f2937; }
body.theme-dark .search-box input { background: #020617; color: #e5e7eb; border: 1px solid #1f2937; }
body.theme-dark header, body.theme-dark .sidebar, body.theme-dark .content { background-color: #0f172a; }

.new-badge {
    position: absolute; top: 10px; right: 10px;
    background: #ef4444; color: #ffffff;
    font-size: 11px; font-weight: 700; padding: 4px 8px;
    border-radius: 999px; z-index: 3;
}
</style>
</head>

<body>

<header>
    <div class="search-box">
        <div class="search-input-wrap">
            <input type="text" id="searchInput" placeholder="æœå°‹å½±ç‰‡é—œéµå­—â€¦" oninput="handleSearch(this.value)" />
            <button id="clearSearch">âœ•</button>
        </div>
        <div id="searchResults" class="search-results"></div>
    </div>
    
    <div class="header-theme">
        <button onclick="setTheme('theme-fancy')">ğŸŒ¸ èŠ±ä¿</button>
        <button onclick="setTheme('theme-light')">ğŸ¤ ç™½è‰²</button>
        <button onclick="setTheme('theme-dark')">ğŸŒ™ æ·±è‰²</button>
    </div>
    
    <div class="header-text">
        <h1>å´”ç«‹äºå°ç£ç¿»è­¯ç«™</h1>
        <p>éå®˜æ–¹ï½œç²‰çµ²ç¿»è­¯æ•´ç†ï½œåƒ…ä½œå­¸ç¿’èˆ‡æ¨å»£ä½¿ç”¨</p>
    </div>
</header>

<div class="container">
    <nav class="sidebar">
        <button class="active" onclick="switchTab('live', this)">ç›´æ’­</button>
        <button onclick="switchTab('program', this)">ç¯€ç›®</button>
        <button onclick="switchTab('radio', this)">é›»å°</button>
    </nav>

    <main class="content">
        <div id="live" class="section active">
            <div id="live-filters" class="filter-bar"></div>
            <div class="card-grid" id="live-grid"></div>
        </div>

        <div id="program" class="section">
            <div id="program-filters" class="filter-bar"></div>
            <div class="card-grid" id="program-grid"></div>
        </div>

        <div id="radio" class="section">
            <div id="radio-filters" class="filter-bar"></div>
            <div class="card-grid" id="radio-grid"></div>
        </div>
    </main>
</div>

<footer>
    Â© å´”ç«‹äºå°ç£ç¿»è­¯ç«™ ï½œ ç¶²ç«™æ¶è¨­èˆ‡è¨­è¨ˆï¼šè¥¿å¡
</footer>

<script>
/* =========================================
   â­ 1. è³‡æ–™åº« (JSON Data)
   ========================================= */
const videoData = [
    // --- LIVE ---
    {
        id: 'l1',
        category: 'live',
        title: 'ì‡¼ìŒì•…ì¤‘ì‹¬ MC CUT ê°•ë¯¼(VERIVERY) X ìµœë¦½ìš°(CHUEI LI YU)<br>(ã€ŠShow! éŸ³æ¨‚ä¸­å¿ƒã€‹MC CUT å²¡æ—»(VERIVERY) X å´”ç«‹äº(CHUEI LI YU))',
        link: 'https://chueiliyutwtrans.github.io/chueiliyu-tw-translation/Live/20251213MBC_Show!MusicCore_MC_cut/',
        img: 'images/20251213_MBC_Show!MusicCore_MC_cut.webp',
        desc: 'cutç›´æ’­ï½œä¸­æ–‡ç¿»è­¯',
        credit: 'ç¿»è­¯ï¼šQueenie<br>å­—å¹•è£½ä½œï¼šC<br>æ ¡å°ï¼šè¥¿å¡',
        isNew: true,
        cast: ['æŸ³å²¡æ—»']
    },
    {
        id: 'l2',
        category: 'live',
        title: 'ë¦½ìš°ì™€ CHRISTMAS NIGHT<br>(å’Œç«‹äºä¸€èµ·åº¦éè–èª•å¤œ)',
        link: 'https://chueiliyutwtrans.github.io/chueiliyu-tw-translation/Live/20251224LIYU_CHRISTMAS_NIGHT/',
        img: 'images/20251224_CHRISTMAS_NIGHT_with_LIYU.webp',
        desc: 'å®Œæ•´ç›´æ’­ï½œä¸­æ–‡ç¿»è­¯',
        credit: 'ç¿»è­¯ï¼šè¥¿å¡<br>å­—å¹•è£½ä½œï¼šè¥¿å¡',
        isNew: false,
        cast: []
    },
    {
        id: 'l3',
        category: 'live',
        title: 'ì—¬ëŸ¬ë¶„ê³¼ í•¨ê»˜í•˜ëŠ” ì²« ìƒì¼â™¥<br>(å’Œå¤§å®¶ä¸€èµ·åº¦éçš„ç¬¬ä¸€å€‹ç”Ÿæ—¥â™¥)',
        link: 'https://chueiliyutwtrans.github.io/chueiliyu-tw-translation/Live/20260102LIYU_BRITHDAY_LIVE/',
        img: 'images/20260103_Liyu_Birthday_Live.webp',
        desc: 'å®Œæ•´ç›´æ’­ï½œä¸­æ–‡ç¿»è­¯',
        credit: 'ç¿»è­¯ï¼šè¥¿å¡<br>å­—å¹•è£½ä½œï¼šè¥¿å¡',
        isNew: false,
        cast: []
    },

    // --- PROGRAM ---
    {
        id: 'p1',
        category: 'program',
        title: 'ì™•ì¢Œì˜ ì¹˜í‚¨(ç‚¸é›ç‹åº§ç³»åˆ—)',
        link: 'Program/king-of-chicken/',
        img: 'images/20260102_bhc.webp',
        desc: 'å®Œæ•´ç¯€ç›®ï½œä¸­æ–‡ç¿»è­¯',
        credit: '',
        isNew: true,
        cast: ['HANULIZ','å¼µç€šéŸ³', 'å§œç—é€²', 'æ©å…‰']
    },
    {
        id: 'p2',
        category: 'program',
        title: 'ë•ë°¥ì§‘ EP.5 ìµœë¦½ìš° CHUEI LI YU<br/>(å¾·é£¯åº— EP.5 å´”ç«‹äº)',
        link: 'Program/20251216deok_rice_restaurant_ep5/',
        img: 'images/20251216_deok_rice_restaurant.webp',
        desc: 'å®Œæ•´ç¯€ç›®ï½œä¸­æ–‡ç¿»è­¯',
        credit: 'ç¿»è­¯ï¼šè¥¿å¡ã€Yuli<br>å­—å¹•è£½ä½œï¼šè¥¿å¡<br>æ ¡å°ï¼šè¥¿å¡',
        isNew: false,
        cast: ['æ˜Œç‰']
    },
    {
        id: 'p3',
        category: 'program',
        title: 'MARIE Drawing Diary<br>(MARIEç•«ç•«æ—¥è¨˜)',
        link: 'https://chueiliyutwtrans.github.io/chueiliyu-tw-translation/Program/20251107MARIE_Drawing_Diary/',
        img: 'images/20251107_MARIE_Drawing_Diary.webp',
        desc: 'å®Œæ•´ç¯€ç›®ï½œä¸­æ–‡ç¿»è­¯',
        credit: 'ç¿»è­¯ï¼šè¥¿å¡<br>å­—å¹•è£½ä½œï¼šè¥¿å¡',
        isNew: false,
        cast: []
    },
    {
        id: 'p4',
        category: 'program',
        title: 'ê¹¡ì‹œì•ˆ(ç¡¬æ’è©©å®‰) EP#9',
        link: 'https://chueiliyutwtrans.github.io/chueiliyu-tw-translation/Program/20251220kkang-sian_ep9/',
        img: 'images/20251220_kkang-sian_ep9.webp',
        desc: 'å®Œæ•´ç¯€ç›®ï½œä¸­æ–‡ç¿»è­¯',
        credit: 'ç¿»è­¯ï¼šè¥¿å¡<br>å­—å¹•è£½ä½œï¼šè¥¿å¡',
        isNew: false,
        cast: ['æè©©å®‰']
    },
    {
        id: 'p5',
        category: 'program',
        title: 'í™ì„ì²œì˜ ë³´ì„í•¨ ì‹œì¦Œ4 EP.23<br>(æ´ªéŒ«å¤©çš„å¯¶çŸ³ç›’ç¬¬å››å­£ EP.23)',
        link: 'https://chueiliyutwtrans.github.io/chueiliyu-tw-translation/Program/20251125HongSeokCheon\'s_Jewel_Box/',
        img: 'images/20251125_HongSeokCheon\'s_Jewel_Box_ep.23.webp',
        desc: 'å®Œæ•´ç¯€ç›®ï½œä¸­æ–‡ç¿»è­¯',
        credit: 'ç¿»è­¯ï¼šè¥¿å¡ã€Yuli<br>æ ¡å°ï¼šè¥¿å¡<br>å­—å¹•è£½ä½œï¼šC',
        isNew: false,
        cast: ['æ´ªéŒ«å¤©','å¼µç€šéŸ³']
    },
    {
        id: 'p6',
        category: 'program',
        title: 'Ep.41 ìµœë¦½ìš° | ì—°ìŠµì‹¤ ë°”ë‹¤ìŒ¤<br>(ç·´ç¿’å®¤çš„Badaè€å¸« ep.41)',
        link: 'https://chueiliyutwtrans.github.io/chueiliyu-tw-translation/Program/20251218BadaLee_ep41/',
        img: 'images/20251218_BadaLee_ep41.webp',
        desc: 'å®Œæ•´ç¯€ç›®ï½œä¸­æ–‡ç¿»è­¯',
        credit: 'ç¿»è­¯ï¼šLepus<br>æ ¡å°ï¼šè¥¿å¡<br>å­—å¹•è£½ä½œï¼šè¥¿å¡',
        isNew: false,
        cast: ['Bada Lee']
    },
    {
        id: 'p7',
        category: 'program',
        title: 'ë‘ê·¼ë‘ê·¼ ë¦½ìš° íƒ€ì„ğŸ’— ìµœë¦½ìš°ì˜ ê·€ì—¬ì›€ ëª¨ìŒğŸ°.zip<br>(æ’²é€šæ’²é€šç«‹äºtimeğŸ’—å´”ç«‹äºçš„å¯æ„›åˆé›†ğŸ°.zip)',
        link: 'https://chueiliyutwtrans.github.io/chueiliyu-tw-translation/Program/20260106fredr1ck._choi_ARCHIVE_BY_CHUEI_LI_YU/',
        img: 'images/20260106_fredr1ck._choi_ARCHIVE_BY_CHUEI_LI_YU.webp',
        desc: 'å®Œæ•´ç¯€ç›®ï½œä¸­æ–‡ç¿»è­¯',
        credit: 'ç¿»è­¯ï¼šLepus<br>æ ¡å°ï¼šè¥¿å¡<br>å­—å¹•è£½ä½œï¼šC',
        isNew: false,
        cast: []
    },

    // --- RADIO ---
    {
        id: 'r1',
        category: 'radio',
        title: '[í•œí•´ì˜ í‚¤ìŠ¤ ë” ë¼ë””ì˜¤] ë†€ë¼ìš´ ì´ˆëŒ€ì„ with. ì¥í•œìŒ & ìµœë¦½ìš°<br>[éŸ“æµ·çš„Kiss the Radio] é©šå–œæ‹›å¾…æœƒ with. å¼µç€šéŸ³ & å´”ç«‹äº',
        link: 'https://chueiliyutwtrans.github.io/chueiliyu-tw-translation/Radio/20251211kiss_the_radio/',
        img: 'images/20251211_kiss_the_radio.webp',
        desc: 'å®Œæ•´é›»å°ï½œä¸­æ–‡ç¿»è­¯',
        credit: 'ç¿»è­¯ï¼šè¥¿å¡<br>å­—å¹•è£½ä½œï¼šC & è¥¿å¡',
        isNew: true,
        cast: ['éŸ“æµ·','å¼µç€šéŸ³']
    },
    {
        id: 'r2',
        category: 'radio',
        title: 'ë°•ì†Œí˜„ì˜ ëŸ¬ë¸Œê²Œì„<br>(æœ´ç´ è³¢çš„ Love Game) | 251221',
        link: 'https://chueiliyutwtrans.github.io/chueiliyu-tw-translation/Radio/20251221lovegame/',
        img: 'images/20251221_love_game.webp',
        desc: 'å®Œæ•´é›»å°ï½œä¸­æ–‡ç¿»è­¯',
        credit: 'ç¿»è­¯ï¼šè¥¿å¡<br>å­—å¹•è£½ä½œï¼šè¥¿å¡',
        isNew: false,
        cast: ['æœ´ç´ è³¢']
    },
    {
        id: 'r3',
        category: 'radio',
        title: 'IDOL RADIO BEHIND EP.173',
        link: 'https://chueiliyutwtrans.github.io/chueiliyu-tw-translation/Radio/20251123idol-radio-ep173-behind/',
        img: 'images/20251123_idol_radio_behind_ep173.webp',
        desc: 'Behind ç‰‡æ®µï½œä¸­æ–‡ç¿»è­¯',
        credit: 'ç¿»è­¯ï¼šè¥¿å¡<br>å­—å¹•è£½ä½œï¼šè¥¿å¡',
        isNew: false,
        cast: ['HANULIZ','å¼µç€šéŸ³', 'å§œç—é€²']
    }
];

/* =========================================
   â­ 2. æ ¸å¿ƒæ¸²æŸ“åŠŸèƒ½
   ========================================= */
window.onload = function() {
    renderAllCards(videoData);
    
    // â­ ä¿®æ”¹ 2: åˆå§‹åŒ–æ‰€æœ‰é¡åˆ¥çš„ç¯©é¸å™¨
    ['live', 'program', 'radio'].forEach(cat => {
        generateFilters(cat);
    });
    
    const savedTheme = localStorage.getItem('site-theme') || 'theme-fancy';
    setTheme(savedTheme);
};

function createCardHTML(item) {
    const badge = item.isNew ? '<span class="new-badge">NEW</span>' : '';
    const credit = item.credit ? `<div class="card-credit">${item.credit}</div>` : '';
    
    return `
    <article class="card" data-id="${item.id}" data-title="${item.title}">
        <a href="${item.link}" target="_blank" style="text-decoration:none; color:inherit; display:block;">
            <div style="position:relative;">
                <img src="${item.img}" alt="${item.title.replace(/<br>/g, ' ')}" loading="lazy">
                ${badge}
            </div>
            <div class="card-body">
                <div class="card-title">${item.title}</div>
                <div class="card-desc">${item.desc}</div>
                ${credit}
            </div>
        </a>
    </article>
    `;
}

function renderAllCards(data) {
    const liveContainer = document.getElementById('live-grid');
    const programContainer = document.getElementById('program-grid');
    const radioContainer = document.getElementById('radio-grid');

    liveContainer.innerHTML = data.filter(i => i.category === 'live').map(createCardHTML).join('');
    programContainer.innerHTML = data.filter(i => i.category === 'program').map(createCardHTML).join('');
    radioContainer.innerHTML = data.filter(i => i.category === 'radio').map(createCardHTML).join('');
}

/* =========================================
   â­ 3. é€šç”¨ç¯©é¸åŠŸèƒ½ (Generic Filters)
   ========================================= */

// â­ ä¿®æ”¹ 3: å‡½å¼é€šç”¨åŒ– (æ¥å— category åƒæ•¸)
function generateFilters(category) {
    // 1. æ‰¾å‡ºè©²åˆ†é¡çš„æ‰€æœ‰ cast
    const items = videoData.filter(i => i.category === category);
    const allCasts = items.flatMap(p => p.cast);
    const uniqueCasts = [...new Set(allCasts)];

    // å¦‚æœè©²åˆ†é¡æ²’æœ‰ä»»ä½•å‡ºæ¼”åå–®ï¼Œå°±ç›´æ¥çµæŸï¼Œä¸ç”¢ç”Ÿä»»ä½•æŒ‰éˆ•
    if (uniqueCasts.length === 0) return;

    // 2. æ‰¾åˆ°å°æ‡‰çš„å®¹å™¨ (ä¾‹å¦‚ program-filters, live-filters...)
    const filterContainer = document.getElementById(category + '-filters');
    if (!filterContainer) return;
    
    // 3. ç”¢ç”Ÿ "å…¨éƒ¨" æŒ‰éˆ•
    let html = `<button class="filter-btn active" onclick="filterCategory('${category}', 'all', this)">å…¨éƒ¨</button>`;
    
    // 4. ç”¢ç”Ÿå„å€‹åƒæ¼”äººå“¡æŒ‰éˆ•
    uniqueCasts.forEach(cast => {
        html += `<button class="filter-btn" onclick="filterCategory('${category}', '${cast}', this)">${cast}</button>`;
    });

    filterContainer.innerHTML = html;
}

// â­ ä¿®æ”¹ 4: ç¯©é¸å‹•ä½œé€šç”¨åŒ–
function filterCategory(category, castName, btnElement) {
    // 1. æŒ‰éˆ•æ¨£å¼åˆ‡æ› (åªé‡å°è©²åˆ†é¡çš„æŒ‰éˆ•)
    const containerId = '#' + category + '-filters';
    document.querySelectorAll(containerId + ' .filter-btn').forEach(b => b.classList.remove('active'));
    btnElement.classList.add('active');

    // 2. ç¯©é¸è³‡æ–™
    const gridId = category + '-grid';
    const gridContainer = document.getElementById(gridId);
    let filteredData;

    if (castName === 'all') {
        filteredData = videoData.filter(i => i.category === category);
    } else {
        filteredData = videoData.filter(i => i.category === category && i.cast.includes(castName));
    }

    // 3. é‡æ–°æ¸²æŸ“è©²å€å¡Š
    gridContainer.innerHTML = filteredData.map(createCardHTML).join('');
}

/* =========================================
   â­ 4. åˆ‡æ›èˆ‡æœå°‹åŠŸèƒ½
   ========================================= */
function switchTab(sectionId, btn) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.getElementById(sectionId).classList.add('active');
    
    document.querySelectorAll('.sidebar button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
}

const searchInput = document.getElementById('searchInput');
const clearBtn = document.getElementById('clearSearch');
const resultsBox = document.getElementById('searchResults');

function handleSearch(keyword) {
    resultsBox.innerHTML = '';
    
    if (!keyword.trim()) {
        clearBtn.classList.remove('visible');
        clearHighlight();
        return;
    }
    
    clearBtn.classList.add('visible');

    const categories = {
        'live': 'ğŸ“º ç›´æ’­',
        'program': 'ğŸ¬ ç¯€ç›®',
        'radio': 'ğŸ“» é›»å°'
    };

    const matched = videoData.filter(item => 
        item.title.toLowerCase().includes(keyword.toLowerCase())
    );

    ['live', 'program', 'radio'].forEach(cat => {
        const count = matched.filter(m => m.category === cat).length;
        if (count > 0) {
            const btn = document.createElement('button');
            btn.innerText = `${categories[cat]} (${count})`;
            btn.onclick = () => jumpToCategory(cat, keyword);
            resultsBox.appendChild(btn);
        }
    });
}

function jumpToCategory(catId, keyword) {
    const tabBtn = document.querySelector(`.sidebar button[onclick*="${catId}"]`);
    switchTab(catId, tabBtn);

    clearHighlight();

    // é€™è£¡éœ€è¦æ³¨æ„ï¼šå¦‚æœä½¿ç”¨è€…ä¹‹å‰ç¯©é¸éï¼Œé€™è£¡å¯èƒ½éœ€è¦é‡ç½®ç¯©é¸æ‰èƒ½æ‰¾åˆ°è¢«éš±è—çš„å¡ç‰‡
    // ç°¡å–®è§£æ³•ï¼šå…ˆè‡ªå‹•è§¸ç™¼ "å…¨éƒ¨" æŒ‰éˆ•
    const allBtn = document.querySelector(`#${catId}-filters button:first-child`);
    if(allBtn) allBtn.click(); 

    // ç¨å¾®å»¶é²ç­‰æ¸²æŸ“å®Œ
    setTimeout(() => {
        const container = document.getElementById(`${catId}-grid`);
        const cards = container.querySelectorAll('.card');
        let firstMatch = null;

        cards.forEach(card => {
            const title = card.getAttribute('data-title').toLowerCase();
            if (title.includes(keyword.toLowerCase())) {
                card.classList.add('search-highlight');
                if (!firstMatch) firstMatch = card;
            }
        });

        if (firstMatch) {
            firstMatch.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    }, 50);
}

function clearHighlight() {
    document.querySelectorAll('.search-highlight').forEach(el => el.classList.remove('search-highlight'));
}

clearBtn.addEventListener('click', () => {
    searchInput.value = '';
    handleSearch('');
    searchInput.focus();
});

function setTheme(theme) {
    const themes = ['theme-fancy', 'theme-light', 'theme-dark'];
    document.body.classList.remove(...themes);
    document.body.classList.add(theme);
    localStorage.setItem('site-theme', theme);
}
</script>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getDatabase, ref, onValue, runTransaction } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
    
  const firebaseConfig = {
    apiKey: "AIzaSyC9Hi740uOlJf1dSyDpyeispds_TtCjNjg",
    authDomain: "chueiliyu-tw-translation.firebaseapp.com",
    databaseURL: "https://chueiliyu-tw-translation-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "chueiliyu-tw-translation",
    storageBucket: "chueiliyu-tw-translation.appspot.com",
    messagingSenderId: "625769420546",
    appId: "1:625769420546:web:6d25889d1c66a091fe941b", 
    measurementId: "G-3PM3GTXPHF"
  };

  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  window.db = getDatabase(app);
  window.fb_ref = ref;            
  window.fb_onValue = onValue;     
  window.fb_runTransaction = runTransaction; 
</script>
</body>
</html>

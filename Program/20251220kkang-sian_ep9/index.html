<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>ç¡¬æ’è©©å®‰ EP#9</title>

<style>
body {
    margin: 0;
    background: #111;
    color: #fff;
    font-family: Arial, "Noto Sans TC", sans-serif;
    text-align: center;
}

html, body {
    background: #000 !important; /* å¼·åˆ¶å…¨é»‘ */
    height: 100%;
    width: 100%;
    margin: 0;
}

</style>
<link rel="stylesheet" href="/chueiliyu-tw-translation/css/reaction.css">
</head>
    
<body>
<div id="controls">
    <div class="control-row">
        <button onclick="toggleBarrageDisplay()" id="barrage-toggle-btn">å³æ™‚è¡¨æƒ…ï¼šé–‹</button>

        <div class="control-group barrage-control">
            <span>å¤§å°</span>
            <input type="range" id="barrage-size-slider" min="16" max="60" value="24" oninput="updateBarrageSize(this.value)">
        </div>

        <div class="control-group barrage-control">
            <span>ç¯„åœ</span>
            <input type="range" id="barrage-height-slider" min="10" max="100" value="40" oninput="updateBarrageHeight(this.value)">
            <span id="height-val">40%</span>
        </div>

        <div class="control-group barrage-control">
            <span>é€Ÿåº¦</span>
            <input type="range" id="barrage-speed-slider" min="3" max="10" step="1" value="5" oninput="updateBarrageSpeed(this.value)">
        </div>

        <div class="control-group">
            <button class="sub-btn" onclick="changeSubtitleSize(-0.1)">Aâˆ’</button>
            <span>å­—å¹•</span>
            <button class="sub-btn" onclick="changeSubtitleSize(0.1)">Aï¼‹</button>
        </div>

        <button id="fs-btn">é€²å…¥å…¨è¢å¹•</button>
    </div>
</div>

<h2>ê¹¡ì‹œì•ˆ(ç¡¬æ’è©©å®‰) EP#9</h2>

<div id="video-wrapper">
    <div id="player"></div>
    <div id="subtitle">å­—å¹•è¼‰å…¥ä¸­...</div>
    <div id="barrage-container"></div>

    <button id="emoji-trigger-btn" onclick="toggleEmojiDrawer(event)">ğŸ˜Š</button>

    <div id="emoji-drawer"></div>
    
    <button id="exit-fs-btn" title="é€€å‡ºå…¨è¢å¹•" style="display: none; opacity: 0;">
        <svg viewBox="0 0 24 24">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
    </button>
</div>

<div class="reaction-section">
    <p id="reaction-title">è¦ºå¾—é€™éƒ¨ç¿»è­¯å½±ç‰‡å¦‚ä½•ï¼Ÿé»å€‹è¡¨æƒ…å§ï¼</p>
    <div class="reaction-wall"></div>
    <br>
</div>
    
<script>
/* å½±ç‰‡IDå’ŒSRTæ–‡ä»¶ */
const MY_VIDEO_ID = "BYeGrGsor_4"; 
const MY_SRT_FILE = "1220kkang-sian_ep9.srt";

/* ===== å­—å¹•å¤§å°è¨­å®š ===== */
function changeSubtitleSize(delta) {
        if (typeof coreChangeSubtitleSize === "function") coreChangeSubtitleSize(delta);
}
</script>
    
<script type="module">
  // 1. è¼‰å…¥ Firebase æ ¸å¿ƒåŠŸèƒ½èˆ‡ Analytics
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getDatabase, ref, onValue, runTransaction } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
  // åŠ ä¸Šé€™è¡Œä¾†è¼‰å…¥åˆ†ææ¨¡çµ„
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
    
  // 2. Firebase è¨­å®š
  const firebaseConfig = {
    apiKey: "AIzaSyC9Hi740uOlJf1dSyDpyeispds_TtCjNjg",
    authDomain: "chueiliyu-tw-translation.firebaseapp.com",
    databaseURL: "https://chueiliyu-tw-translation-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "chueiliyu-tw-translation",
    storageBucket: "chueiliyu-tw-translation.appspot.com",
    messagingSenderId: "625769420546",
    appId: "1:625769420546:web:6d25889d1c66a091fe941b", // <-- é€™è£¡åŸæœ¬æ¼äº†ä¸€å€‹é€—è™Ÿï¼Œå·²è£œä¸Š
    measurementId: "G-3PM3GTXPHF"
  };

  // 3. å•Ÿå‹•é€£ç·š
  const app = initializeApp(firebaseConfig);
  
  // å•Ÿå‹• Analytics
  const analytics = getAnalytics(app);

  // ã€Œå€Ÿã€çµ¦å¤–éƒ¨ JS ä½¿ç”¨
  window.db = getDatabase(app);
  window.fb_ref = ref;            
  window.fb_onValue = onValue;    
  window.fb_runTransaction = runTransaction; 
</script>

<script src="/chueiliyu-tw-translation/js/core-player.js"></script>
<script src="/chueiliyu-tw-translation/js/reaction-core.js"></script>
<script src="https://www.youtube.com/iframe_api"></script>
</body>
</html>
